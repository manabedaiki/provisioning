#!/bin/bash

set -e
set -u

{
    echo $'ID\tIMAGE\tSTATUS\tNAMES'
    docker container ls --all --format=$'{{.ID}}\t{{.Image}}\t{{.Status}}\t{{.Names}}'
} | column -ts $'\t' | fzf \
    --no-sort \
    --reverse \
    --header-lines=1 \
    --ansi \
    --bind="\
enter:execute(docker container inspect \$(cut -d ' ' -f 1 <<<{}) | jq -C . | less),\
ctrl-d:execute-silent(docker container rm --force \$(cut -d ' ' -f 1 <<<{}))"
