BUFFER=$(
    history -nr 1 \
    | fzf \
        --query="$LBUFFER")
if (($? != 0)); then
    return
fi
CURSOR=$#BUFFER
zle accept-line
